model Designation {
  id          String      @id @default(uuid())
  name        String      @unique
  status      String      @default("active")
  createdById String?
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  createdBy   User?       @relation("DesignationCreatedBy", fields: [createdById], references: [id])
  employees   Employee[]
  increments  Increment[] @relation("IncrementDesignation")
}

model Allocation {
  id          String       @id @default(uuid())
  name        String       @unique
  status      String       @default("active")
  createdById String?
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  createdBy   User?        @relation("AllocationCreatedBy", fields: [createdById], references: [id])
  departments Department[]
  employees   Employee[]
}

model JobType {
  id          String   @id @default(uuid())
  name        String   @unique
  status      String   @default("active")
  createdById String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  createdBy   User?    @relation("JobTypeCreatedBy", fields: [createdById], references: [id])
}

model Institute {
  id                     String                  @id @default(uuid())
  name                   String                  @unique
  status                 String                  @default("active")
  createdById            String?
  createdAt              DateTime                @default(now())
  updatedAt              DateTime                @updatedAt
  employeeQualifications EmployeeQualification[]
  createdBy              User?                   @relation("InstituteCreatedBy", fields: [createdById], references: [id])
}

model Qualification {
  id                     String                  @id @default(uuid())
  name                   String                  @unique
  status                 String                  @default("active")
  createdById            String?
  createdAt              DateTime                @default(now())
  updatedAt              DateTime                @updatedAt
  employeeQualifications EmployeeQualification[]
  createdBy              User?                   @relation("QualificationCreatedBy", fields: [createdById], references: [id])
}

model MaritalStatus {
  id          String     @id @default(uuid())
  name        String     @unique
  status      String     @default("active")
  createdById String?
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  employees   Employee[]
  createdBy   User?      @relation("MaritalStatusCreatedBy", fields: [createdById], references: [id])
}

model DegreeType {
  id          String   @id @default(uuid())
  name        String   @unique
  status      String   @default("active")
  createdById String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  createdBy   User?    @relation("DegreeTypeCreatedBy", fields: [createdById], references: [id])
}

model Country {
  id        String     @id @default(uuid())
  name      String
  iso       String
  nicename  String
  iso3      String
  phoneCode Int
  numcode   Int
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  cities    City[]
  employees Employee[]
  states    State[]
}

model City {
  id                     String                  @id @default(uuid())
  name                   String
  countryId              String
  stateId                String
  status                 String                  @default("active")
  createdById            String?
  createdAt              DateTime                @default(now())
  updatedAt              DateTime                @updatedAt
  country                Country                 @relation(fields: [countryId], references: [id], onDelete: Cascade)
  createdBy              User?                   @relation("CityCreatedBy", fields: [createdById], references: [id])
  state                  State                   @relation(fields: [stateId], references: [id], onDelete: Cascade)
  employees              Employee[]
  employeeQualifications EmployeeQualification[]
  locations              Location[]

  @@unique([name, countryId, stateId])
}

model State {
  id                     String                  @id @default(uuid())
  name                   String
  countryId              String
  status                 String                  @default("active")
  createdById            String?
  createdAt              DateTime                @default(now())
  updatedAt              DateTime                @updatedAt
  cities                 City[]
  employees              Employee[]
  employeeQualifications EmployeeQualification[]
  country                Country                 @relation(fields: [countryId], references: [id], onDelete: Cascade)
  createdBy              User?                   @relation("StateCreatedBy", fields: [createdById], references: [id])
}

model Location {
  id          String     @id @default(uuid())
  name        String     @unique
  address     String?
  cityId      String?
  status      String     @default("active")
  createdById String?
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  employees   Employee[]
  city        City?      @relation(fields: [cityId], references: [id])
  createdBy   User?      @relation("LocationCreatedBy", fields: [createdById], references: [id])
}

model AllowanceHead {
  id              String      @id @default(uuid())
  name            String      @unique
  calculationType String      @default("Amount")
  amount          Decimal?    @db.Decimal(10, 2)
  percentage      Decimal?    @db.Decimal(5, 2)
  status          String      @default("active")
  createdById     String?
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
  allowances      Allowance[]
  createdBy       User?       @relation("AllowanceHeadCreatedBy", fields: [createdById], references: [id])
}

model DeductionHead {
  id          String      @id @default(uuid())
  name        String      @unique
  status      String      @default("active")
  createdById String?
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  deductions  Deduction[]
  createdBy   User?       @relation("DeductionHeadCreatedBy", fields: [createdById], references: [id])
}

model LoanType {
  id           String        @id @default(uuid())
  name         String        @unique
  status       String        @default("active")
  createdById  String?
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  loanRequests LoanRequest[]
  createdBy    User?         @relation("LoanTypeCreatedBy", fields: [createdById], references: [id])
}

model LeaveType {
  id                String                  @id @default(uuid())
  name              String                  @unique
  status            String                  @default("active")
  createdById       String?
  createdAt         DateTime                @default(now())
  updatedAt         DateTime                @updatedAt
  leaveApplications LeaveApplication[]
  createdBy         User?                   @relation("LeaveTypeCreatedBy", fields: [createdById], references: [id])
  leavesPolicies    LeavesPolicyLeaveType[]
}

model LeavesPolicy {
  id                      String                  @id @default(uuid())
  name                    String                  @unique
  details                 String?
  policyDateFrom          DateTime?
  policyDateTill          DateTime?
  fullDayDeductionRate    Decimal?
  halfDayDeductionRate    Decimal?
  shortLeaveDeductionRate Decimal?
  status                  String                  @default("active")
  isDefault               Boolean                 @default(false)
  createdById             String?
  createdAt               DateTime                @default(now())
  updatedAt               DateTime                @updatedAt
  employees               Employee[]
  createdBy               User?                   @relation("LeavesPolicyCreatedBy", fields: [createdById], references: [id])
  leaveTypes              LeavesPolicyLeaveType[]
}

model LeavesPolicyLeaveType {
  id             String       @id @default(uuid())
  leavesPolicyId String
  leaveTypeId    String
  numberOfLeaves Int
  createdAt      DateTime     @default(now())
  updatedAt      DateTime     @updatedAt
  leaveType      LeaveType    @relation(fields: [leaveTypeId], references: [id], onDelete: Cascade)
  leavesPolicy   LeavesPolicy @relation(fields: [leavesPolicyId], references: [id], onDelete: Cascade)

  @@unique([leavesPolicyId, leaveTypeId])
}

model Equipment {
  id            String              @id @default(uuid())
  name          String              @unique
  equipmentType String              @default("other")
  description   String?
  status        String              @default("active")
  createdById   String?
  createdAt     DateTime            @default(now())
  updatedAt     DateTime            @updatedAt
  assignments   EmployeeEquipment[]
  createdBy     User?               @relation("EquipmentCreatedBy", fields: [createdById], references: [id])
}

model SalaryBreakup {
  id          String   @id @default(uuid())
  name        String   @unique
  details     String?
  percentage  Decimal? @db.Decimal(5, 2)
  status      String   @default("active")
  createdById String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  createdBy   User?    @relation("SalaryBreakupCreatedBy", fields: [createdById], references: [id])
}

model TaxSlab {
  id          String   @id @default(uuid())
  name        String
  minAmount   Decimal
  maxAmount   Decimal
  rate        Decimal
  fixedAmount Decimal? @default(0)
  status      String   @default("active")
  createdById String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  createdBy   User?    @relation("TaxSlabCreatedBy", fields: [createdById], references: [id])
}

model BonusType {
  id              String   @id @default(uuid())
  name            String   @unique
  calculationType String   @default("Amount")
  amount          Decimal? @db.Decimal(10, 2)
  percentage      Decimal? @db.Decimal(5, 2)
  status          String   @default("active")
  createdById     String?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  bonuses         Bonus[]  @relation("BonusBonusType")
  createdBy       User?    @relation("BonusTypeCreatedBy", fields: [createdById], references: [id])
}

model ApprovalSetting {
  id          String   @id @default(uuid())
  name        String
  levels      Int      @default(1)
  details     String?
  status      String   @default("active")
  createdById String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  createdBy   User?    @relation("ApprovalSettingCreatedBy", fields: [createdById], references: [id])
}

model Department {
  id                              String                           @id @default(uuid())
  name                            String                           @unique
  allocationId                    String?
  headId                          String?                          @unique
  createdById                     String?
  createdAt                       DateTime                         @default(now())
  updatedAt                       DateTime                         @updatedAt
  allocation                      Allocation?                      @relation(fields: [allocationId], references: [id])
  createdBy                       User?                            @relation("DepartmentCreatedBy", fields: [createdById], references: [id])
  head                            Employee?                        @relation("DepartmentHead", fields: [headId], references: [id])
  employees                       Employee[]
  requestForwardingApprovalLevels RequestForwardingApprovalLevel[] @relation("RequestForwardingDepartment")
  subDepartments                  SubDepartment[]
  payrollApprovalLevels           PayrollApprovalLevel[]
}

model SubDepartment {
  id                              String                           @id @default(uuid())
  name                            String
  departmentId                    String
  headId                          String?                          @unique
  createdById                     String?
  createdAt                       DateTime                         @default(now())
  updatedAt                       DateTime                         @updatedAt
  employees                       Employee[]
  requestForwardingApprovalLevels RequestForwardingApprovalLevel[] @relation("RequestForwardingSubDepartment")
  createdBy                       User?                            @relation("SubDepartmentCreatedBy", fields: [createdById], references: [id])
  department                      Department                       @relation(fields: [departmentId], references: [id], onDelete: Cascade)
  head                            Employee?                        @relation("SubDepartmentHead", fields: [headId], references: [id])
  payrollApprovalLevels           PayrollApprovalLevel[]

  @@unique([name, departmentId])
}

model EOBI {
  id                   String   @id @default(uuid())
  name                 String
  eobiId               String?
  eobiCode             String?
  amount               Decimal?
  employerContribution Decimal  @db.Decimal(10, 2)
  employeeContribution Decimal  @db.Decimal(10, 2)
  yearMonth            String
  status               String   @default("active")
  createdById          String?
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt
  createdBy            User?    @relation("EOBICreatedBy", fields: [createdById], references: [id])
}

model EmployeeGrade {
  id          String      @id @default(uuid())
  grade       String      @unique
  status      String      @default("active")
  createdById String?
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  employees   Employee[]
  createdBy   User?       @relation("EmployeeGradeCreatedBy", fields: [createdById], references: [id])
  increments  Increment[] @relation("IncrementEmployeeGrade")
}

model EmployeeStatus {
  id          String     @id @default(uuid())
  status      String     @unique
  statusType  String     @default("active")
  createdById String?
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  employees   Employee[]
  createdBy   User?      @relation("EmployeeStatusCreatedBy", fields: [createdById], references: [id])
}

model ProvidentFund {
  id          String   @id @default(uuid())
  name        String   @unique
  percentage  Decimal
  status      String   @default("active")
  createdById String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  createdBy   User?    @relation("ProvidentFundCreatedBy", fields: [createdById], references: [id])
}

model WorkingHoursPolicy {
  id                           String                         @id @default(uuid())
  name                         String                         @unique
  startWorkingHours            String
  endWorkingHours              String
  shortDayMins                 Int?
  startBreakTime               String?
  endBreakTime                 String?
  halfDayStartTime             String?
  lateStartTime                String?
  lateDeductionType            String?
  applyDeductionAfterLates     Int?
  lateDeductionPercent         Decimal?
  halfDayDeductionType         String?
  applyDeductionAfterHalfDays  Int?
  halfDayDeductionAmount       Decimal?
  shortDayDeductionType        String?
  applyDeductionAfterShortDays Int?
  shortDayDeductionAmount      Decimal?
  overtimeRate                 Decimal?
  gazzetedOvertimeRate         Decimal?
  dayOverrides                 Json?
  status                       String                         @default("active")
  isDefault                    Boolean                        @default(false)
  createdById                  String?
  createdAt                    DateTime                       @default(now())
  updatedAt                    DateTime                       @updatedAt
  employees                    Employee[]
  createdBy                    User?                          @relation("WorkingHoursPolicyCreatedBy", fields: [createdById], references: [id])
  assignments                  WorkingHoursPolicyAssignment[]
}

model FileUpload {
  id          String   @id @default(uuid())
  filename    String
  mimetype    String
  size        Int
  path        String?
  createdById String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  createdBy   User?    @relation("FileUploadCreatedBy", fields: [createdById], references: [id])
}

model Holiday {
  id          String   @id @default(uuid())
  name        String   @unique
  dateFrom    DateTime
  dateTo      DateTime
  status      String   @default("active")
  createdById String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  createdBy   User?    @relation("HolidayCreatedBy", fields: [createdById], references: [id])
}

model Bank {
  id                  String   @id @default(uuid())
  name                String   @unique
  code                String?  @unique
  accountNumberPrefix String?
  status              String   @default("active")
  createdById         String?
  updatedById         String?
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  createdBy           User?    @relation("BankCreatedBy", fields: [createdById], references: [id])
  updatedBy           User?    @relation("BankUpdatedBy", fields: [updatedById], references: [id])
}

model RebateNature {
  id                      String   @id @default(uuid())
  name                    String   @unique
  type                    String   @default("other")
  category                String?
  status                  String   @default("active")
  maxInvestmentPercentage Decimal? @db.Decimal(5, 2)
  maxInvestmentAmount     Decimal? @db.Decimal(12, 2)
  details                 String?
  underSection            String?
  isAgeDependent          Boolean  @default(false)
  createdById             String?
  createdAt               DateTime @default(now())
  updatedAt               DateTime @updatedAt
  rebates                 Rebate[] @relation("RebateNatureRebate")
  createdBy               User?    @relation("RebateNatureCreatedBy", fields: [createdById], references: [id])
}

model Rebate {
  id             String       @id @default(uuid())
  employeeId     String
  rebateNatureId String
  rebateAmount   Decimal      @db.Decimal(12, 2)
  monthYear      String
  attachment     String?
  status         String       @default("pending")
  remarks        String?
  createdById    String?
  createdAt      DateTime     @default(now())
  updatedAt      DateTime     @updatedAt
  createdBy      User?        @relation("RebateCreatedBy", fields: [createdById], references: [id])
  employee       Employee     @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  rebateNature   RebateNature @relation("RebateNatureRebate", fields: [rebateNatureId], references: [id])

  @@unique([employeeId, rebateNatureId, monthYear])
}
